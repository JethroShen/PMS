var AccountUtil={};AccountUtil.saveToken=function(n,t,o){AccountUtil.clearToken(function(){function e(n,t){var a=$($(".login_iframe")[n]),i=t[n];a.attr({src:i}),a.load(function(){n>=t.length-1?o&&setTimeout(function(){o()},500):e(n+1,t)})}var a=["/account/setToken?token="+n,Constant.PASSPORT_HOST+"/account/setToken?token="+n,t?Constant.BBS_HOST+"?"+t:""],i=[];$.each(a,function(n,t){t&&i.push(t)}),e(0,i)})},AccountUtil.clearToken=function(n){var t=$('<iframe style="height:0;width:0;border: none;" name="child"></iframe>'),o="/account/removeToken";t.attr({src:o}),t.load(n),$("body").append(t)},AccountUtil.isIE=function(){return"Microsoft Internet Explorer"==navigator.appName&&"MSIE8.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")||"Microsoft Internet Explorer"==navigator.appName&&"MSIE9.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")},AccountUtil.modifyNickname=function(n,t){var o=n.val();if(void 0==o||0==getStrLength(o))return void $("#nickname_fall").show().html("昵称不能为空");var e=/^([0-9a-zA-Z]|[\u4E00-\u9FA5])*$/;if(!e.test(o))return void("web"==t?$("#nickname_fall").show().html("昵称只能包括中英文、数字"):"wap"==t&&($(".nickname_error_hint").show().css({top:0}),$(".mo_nickname_btn").html("保存")));o=encodeURI(o);var a=Constant.PASSPORT_HOST+"/account/modifyNickname?nickName="+o;ajax({url:a,dataType:AccountUtil.isIE()?"jsonp":"json",withCredentials:!0}).done(function(){"web"==t?window.location.reload():"wap"==t&&(window.location.href="/course/list/0/1.html")},function(n){var o=n.responseText;try{var e=JSON.parse(o);(e.errorCode=30013)&&("web"==t?$("#nickname_fall").show().html("昵称已被霸占了，换个试试~"):"wap"==t&&($(".nickname_error_hint").show().css({top:0}).html("<span></span>昵称已被霸占了，换个试试~"),$(".mo_nickname_btn").html("保存")))}catch(a){}})},AccountUtil.getPageType=function(n){var t=n.split("/"),o=t.length,e=t[o-1].split(".")[0];return e},AccountUtil.resetJumpLink=function(n){var t=document.referrer;t?history.go(-1):window.location.href=n},AccountUtil.judgeTel=function(n,t,o){var e=n,a=/^1[0-9]{10}$/;a.test(e)?t&&t():o&&o()},AccountUtil.islogin=function(){var n=$("#j-logined").val();return n&&1==n?!0:!1};